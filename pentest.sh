#!/bin/bash
# Requisitos:
# Nmap
# Metasploit
# Figlet
#
figlet -f banner pentest
echo
echo "}--------------{+} Codigo por Arturo Mata {+}--------------{"
echo "}--------{+}  GitHub.com/matarturo/pentest {+}--------{"
echo "Versi贸n: 1.0"
echo
echo -ne "Famework para automatizar pentesting usando Bash, Nmap y atacando con Metasploit\n"
echo
echo "####################################"
echo -e "M E N U   D E   O P C I O N E S\n"
echo "####################################"
mainmenu() {
echo -ne " -Opcion 1= Reconocimiento\n -Opcion 2= Escaneo/Enumeraci贸n\n -Opcion 3= Buscar exploits con Metasploit \n -Opcion 0= Salir\n"
echo -e "Introduzca por favor el numero de opci贸n\n"
read opcion

case $opcion in

     1)
     echo "-------MODULO PING-------" #se iniciara el modulo de busqueda de host activos
     echo
     echo -e "Introduce los 3 primeros octetos del rango a escanear. Ejemplo: 192.168.2\n"
     read ip
     echo "*********Buscando...**********"
     for n in {1..254}; do
         host=$ip.$n
         ping -c2 "$host" &>/dev/null
         if [ $? = 0 ]; then
                      echo "$host is UP"
         else
                      echo "$host is DOWN"
         fi
     done
      mainmenu
     ;;
     2)
     echo "-------MODULO NMAP-------" #se iniciara el modulo NMAP
     echo
     echo -e "Introduce la direccion IP o rango a escanear\n"
     read ip2
     echo -e "Introduce el nombre que quieres ponerle al escaneo\n"
     read archivo2
  nmap -Pn -sS --script vuln "$ip2" -o "$archivo2"
  echo -e "Fin del analisis\n"
  mainmenu
  ;;
  3)
  echo "-------MODULO METASPLOIT------" #se iniciara el modulo Metasploit
  echo
  echo -e "Introduce la ip victima\n"
  read ip3
  echo -e "Introduce el nombre de un servicio para encontrar algun exploit en Metasploit\n"
  read meta
  read archivo2

msfconsole -x "set rhosts $ip3;search $meta" #se iniciara la busqueda del modulo auxiliar o exploit

  ;;
  0)
  echo "Hasta luego" #salida del script
  exit 0
  ;;
  *)
  echo "Opci贸n invalida" #control de error
  mainmenu
  ;;
esac
}
mainmenu
